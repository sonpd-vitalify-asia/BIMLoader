(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function c(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=c(t);fetch(t.href,r)}})();function L(n){n.addSource("eraser",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[139.68916027204043,35.688425210208294],[139.68744520486524,35.69091967281949],[139.69018015208286,35.69183733597276],[139.69091560185112,35.688655450216125]]],type:"Polygon"}}]}}),n.addLayer({id:"eraser",type:"clip",source:"eraser",layout:{"clip-layer-types":["symbol","model"]}})}function S(n){var e=window.THREE,c=[139.6900245027105,35.68854705256683],i=0,t=[Math.PI/2,e.MathUtils.degToRad(10),0],r=mapboxgl.MercatorCoordinate.fromLngLat(c,i),o={translateX:r.x,translateY:r.y,translateZ:r.z,rotateX:t[0],rotateY:t[1],rotateZ:t[2],scale:r.meterInMercatorCoordinateUnits()};n.addLayer({id:"flight-route-layer",type:"custom",renderingMode:"3d",onAdd:function(d,l){this.camera=new e.Camera,this.scene=new e.Scene;const a=new e.DirectionalLight(16777215,1);a.position.set(40,70,100);let m=1e3,h=2,s=8096;a.castShadow=!0,a.shadow.radius=h,a.shadow.mapSize.width=s,a.shadow.mapSize.height=s,a.shadow.camera.top=a.shadow.camera.right=m,a.shadow.camera.bottom=a.shadow.camera.left=-1e3,a.shadow.camera.near=1,a.shadow.camera.far=1e3,a.intensity=10,a.shadow.bias=1e-4,this.scene.add(a),this.scene.add(new e.DirectionalLightHelper(a,10));var p=new e.GLTFLoader;p.load("./scene.glb",function(u){u.scene.traverse(function(y){y.isMesh&&(y.castShadow=!0,y.receiveShadow=!0)}),this.scene.add(u.scene);const f=new e.Box3().setFromObject(u.scene).getSize(new e.Vector3(0,0,0)),x=[f.x,f.y,f.z],M=Math.max(...x)*10,b=new e.PlaneBufferGeometry(M,M),v=new e.ShadowMaterial;v.opacity=.5;let w=new e.Mesh(b,v);w.rotateX(-Math.PI/2),w.receiveShadow=!0,this.scene.add(w)}.bind(this)),this.map=d,this.renderer=new e.WebGLRenderer({canvas:d.getCanvas(),context:l,antialias:!0}),this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=e.PCFSoftShadowMap},render:function(d,l){var a=new e.Matrix4().makeRotationAxis(new e.Vector3(1,0,0),o.rotateX),m=new e.Matrix4().makeRotationAxis(new e.Vector3(0,1,0),o.rotateY),h=new e.Matrix4().makeRotationAxis(new e.Vector3(0,0,1),o.rotateZ),s=new e.Matrix4().fromArray(l),p=new e.Matrix4().makeTranslation(o.translateX,o.translateY,o.translateZ).scale(new e.Vector3(o.scale,-o.scale,o.scale)).multiply(a).multiply(m).multiply(h);this.camera.projectionMatrix=s.multiply(p),this.renderer.state.reset(),this.renderer.render(this.scene,this.camera),this.map.triggerRepaint()}})}const z="pk.eyJ1IjoidmZhc29ucGQiLCJhIjoiY2tvbTl3NHFvMHU1YjJ3bzd4cnp0c2h2NSJ9.MXSJRTka-63tR-t8RK-Xag";mapboxgl.accessToken=z;let P=[139.68863163290052,35.69077270767807];const g=new mapboxgl.Map({container:"map",center:P,zoom:15.27,pitch:42,bearing:-50,style:"mapbox://styles/vfasonpd/ckomjiv0e0bka17mzt5z7v5ij",minZoom:7,maxZoom:20,maxPitch:80});g.on("style.load",function(){L(g),S(g)});
