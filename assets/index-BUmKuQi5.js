(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const t of i.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&a(t)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}})();function x(o){o.addSource("eraser",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[139.66434016560476,35.70734762727297],[139.66506846307053,35.707289104885675],[139.66513700246438,35.70688371493084],[139.66435569957977,35.70687233504728]]],type:"Polygon"}}]}}),o.addLayer({id:"eraser",type:"clip",source:"eraser",layout:{"clip-layer-types":["symbol","model"]}})}function L(o){let d=[139.6902,35.689],s={day:"ckomjiv0e0bka17mzt5z7v5ij",night:"cma6doztc00dn01sl7wrl5zol"},a=s.day,e=!1;o.addLayer({id:"flight-route-layer",type:"custom",renderingMode:"3d",onAdd:function(t,r){window.tb=new Threebox(t,r,{realSunlight:!0}),i()},render:function(t,r){tb.update()}});async function i(){let t=tb.lightDateTime,r=t.getHours()*3600+t.getMinutes()*60+t.getSeconds(),u=document.getElementById("time");u.value=r,u.oninput=()=>{r=+u.value,t.setHours(Math.floor(r/3600)),t.setMinutes(Math.floor(r/60)%60),t.setSeconds(r%60),o.triggerRepaint()};function f(l=new Date,c){let y=l.toLocaleString("en-US",{timeZone:c});return new Date(y)}o.on("render",()=>{tb.setSunlight(t),f(t,"Asia/Tokyo"),hour.innerHTML="Sunlight on date/time: "+t.toLocaleString(),h(t,d),o.sunPosition=tb.sunPosition});function h(l,c){const y=tb.getSunPosition(l,[-.12501974,51.53]);function b(g){return g*180/Math.PI}const S=b(y.azimuth);function P(g){return(g%360+360)%360}let m=tb.getSunTimes(l,c);l>=m.sunriseEnd&&l<=m.sunsetStart?a!=s.day&&(console.log("it's day"),o.setPaintProperty("background","background-color","#7fb4f7"),a=s.day,e=!0):a!=s.night&&(console.log("it's night"),o.setPaintProperty("background","background-color","#808080"),a=s.night,e=!1),o.setLights([{id:"directional",type:"directional",properties:{color:"rgba(255.0, 255.0, 255.0, 1.0)",intensity:1,direction:[P(S),45],"cast-shadows":e,"shadow-intensity":1}}])}}}const w="pk.eyJ1IjoidmZhc29ucGQiLCJhIjoiY2tvbTl3NHFvMHU1YjJ3bzd4cnp0c2h2NSJ9.MXSJRTka-63tR-t8RK-Xag";mapboxgl.accessToken=w;var p=[139.66461146239243,35.70698328883841];const n=new mapboxgl.Map({container:"map",center:p,zoom:15.27,pitch:42,bearing:-50,style:"mapbox://styles/vfasonpd/ckomjiv0e0bka17mzt5z7v5ij",minZoom:15,maxZoom:18});n.on("style.load",()=>{x(n),n.setConfigProperty("basemap","lightPreset","dusk"),n.addSource("model",{type:"geojson",data:{type:"Feature",properties:{"model-uri":"https://sonpd-vitalify-asia.github.io/BIMLoader/tower.glb"},geometry:{coordinates:p,type:"Point"}}}),n.addLayer({id:"tower",type:"model",slot:"middle",source:"model",minzoom:15,layout:{"model-id":["get","model-uri"]},paint:{"model-opacity":1,"model-rotation":[0,0,0],"model-scale":[1,1,1.5],"model-color-mix-intensity":0,"model-cast-shadows":!0,"model-emissive-strength":.8}});const o={type:"FeatureCollection",features:[{type:"Feature",properties:{height:15},geometry:{type:"Polygon",coordinates:[[[139.66444844801015,35.70729972742914],[139.66497690707288,35.70729609087284],[139.66493212240653,35.70808158318436],[139.66439918487717,35.70809249274527]]]}}]};n.addSource("custom-extrusion",{type:"geojson",data:o}),n.addLayer({id:"custom-extrusion-layer",type:"fill-extrusion",source:"custom-extrusion",paint:{"fill-extrusion-color":"#ffffff","fill-extrusion-height":["get","height"],"fill-extrusion-base":0,"fill-extrusion-opacity":1}}),L(n)});
